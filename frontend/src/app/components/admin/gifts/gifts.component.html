<div class="gifts-management">
  <h2>Manage Gifts</h2>
  
  <button class="btn btn-primary" (click)="openForm()" *ngIf="!showForm">Add New Gift</button>

  <div class="gift-form" *ngIf="showForm">
    <h3>{{ editMode ? 'Edit Gift' : 'Add New Gift' }}</h3>
    <form (ngSubmit)="saveGift()">
      <div class="form-group">
        <label>Name</label>
        <input type="text" [(ngModel)]="gift.name" name="name" required class="form-control">
      </div>
      
      <div class="form-group">
        <label>Description</label>
        <textarea [(ngModel)]="gift.description" name="description" required class="form-control"></textarea>
      </div>
      
      <div class="form-group">
        <label>Price</label>
        <input type="number" [(ngModel)]="gift.price" name="price" required class="form-control">
      </div>
      
      <div class="form-group">
        <label>Image</label>
        <input type="file" (change)="onImageSelect($event)" accept="image/*" class="form-control">
        <img *ngIf="imagePreview" [src]="imagePreview" alt="Preview" style="max-width: 200px; margin-top: 10px;">
      </div>
      
      <div class="form-group">
        <label>Category</label>
        <select [(ngModel)]="gift.categoryId" name="categoryId" required class="form-control">
          <option value="0">Select Category</option>
          <option *ngFor="let category of categories" [value]="category._id">{{ category.name }}</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Stock</label>
        <input type="number" [(ngModel)]="gift.stock" name="stock" required class="form-control">
      </div>
      
      <button type="submit" class="btn btn-success">{{ editMode ? 'Update' : 'Add' }} Gift</button>
      <button type="button" class="btn btn-secondary" (click)="closeForm()">Cancel</button>
    </form>
  </div>

  <table class="table" *ngIf="!showForm">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let gift of gifts">
        <td>{{ gift.name }}</td>
        <td>{{ gift.description }}</td>
        <td>â‚¹{{ gift.price }}</td>
        <td>{{ gift.stock }}</td>
        <td>
          <button class="btn btn-sm btn-warning" (click)="editGift(gift)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteGift(gift.id!)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
